ARG GRAFANA_VERSION="10.2.2"

FROM grafana/grafana:${GRAFANA_VERSION}

ARG CONFIG_FILE
ARG GF_PATHS_CONFIG
ARG GF_PATHS_PROVISIONING
ARG DATASOURCES_FOLDER
ARG DASHBOARDS_FOLDER
ARG DASHBOARDS_PROVIDER

COPY .${CONFIG_FILE} ${GF_PATHS_CONFIG}
COPY .${DASHBOARDS_PROVIDER} ${GF_PATHS_PROVISIONING}/dashboards

ADD ${DATASOURCES_FOLDER} ${GF_PATHS_PROVISIONING}/datasources
ADD ${DASHBOARDS_FOLDER} ${GF_PATHS_PROVISIONING}/dashboards

RUN grafana cli plugins install grafana-xyzchart-panel 0.1.0
RUN grafana cli plugins install ae3e-plotly-panel 0.5.0